define(["@grafana/data","@grafana/runtime","rxjs","react","@grafana/ui","@emotion/css"],((e,t,n,r,o,a)=>(()=>{var i={6539:(e,t,n)=>{var r=n(7400).Symbol;e.exports=r},9349:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},8213:(e,t,n)=>{var r=n(4701),o=n(2900),a=n(9785),i=n(3854),u=n(2383),c=n(8519),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),p=!n&&!s&&i(e),f=!n&&!s&&!p&&c(e),m=n||s||p||f,d=m?r(e.length,String):[],y=d.length;for(var v in e)!t&&!l.call(e,v)||m&&("length"==v||p&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||u(v,y))||d.push(v);return d}},9736:(e,t,n)=>{var r=n(6539),o=n(4840),a=n(1258),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},5829:(e,t,n)=>{var r=n(9736),o=n(2360);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},6729:(e,t,n)=>{var r=n(8338),o=n(9678),a=n(1611),i=n(6532),u=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,s=c.toString,p=l.hasOwnProperty,f=RegExp("^"+s.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?f:u).test(i(e))}},6972:(e,t,n)=>{var r=n(9736),o=n(4194),a=n(2360),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},9464:(e,t,n)=>{var r=n(1611),o=n(6016),a=n(1586),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var u in e)("constructor"!=u||!t&&i.call(e,u))&&n.push(u);return n}},1197:(e,t,n)=>{var r=n(1137),o=n(1871),a=n(3132);e.exports=function(e,t){return a(o(e,t,r),e+"")}},4459:(e,t,n)=>{var r=n(551),o=n(2630),a=n(1137),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},4701:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},9334:e=>{e.exports=function(e){return function(t){return e(t)}}},4937:(e,t,n)=>{var r=n(7400)["__core-js_shared__"];e.exports=r},2630:(e,t,n)=>{var r=n(1822),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},9120:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},1822:(e,t,n)=>{var r=n(6729),o=n(5371);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},4840:(e,t,n)=>{var r=n(6539),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,u=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[u]=n:delete e[u]),o}},5371:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},2383:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7535:(e,t,n)=>{var r=n(5638),o=n(68),a=n(2383),i=n(1611);e.exports=function(e,t,n){if(!i(n))return!1;var u=typeof t;return!!("number"==u?o(n)&&a(t,n.length):"string"==u&&t in n)&&r(n[t],e)}},9678:(e,t,n)=>{var r,o=n(4937),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},6016:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},1586:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},8125:(e,t,n)=>{e=n.nmd(e);var r=n(9120),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,u=function(){try{return a&&a.require&&a.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=u},1258:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},1871:(e,t,n)=>{var r=n(9349),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,u=o(a.length-t,0),c=Array(u);++i<u;)c[i]=a[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=a[i];return l[t]=n(c),r(e,this,l)}}},7400:(e,t,n)=>{var r=n(9120),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},3132:(e,t,n)=>{var r=n(4459),o=n(9591)(r);e.exports=o},9591:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),a=16-(o-r);if(r=o,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},6532:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},551:e=>{e.exports=function(e){return function(){return e}}},236:(e,t,n)=>{var r=n(1197),o=n(5638),a=n(7535),i=n(3893),u=Object.prototype,c=u.hasOwnProperty,l=r((function(e,t){e=Object(e);var n=-1,r=t.length,l=r>2?t[2]:void 0;for(l&&a(t[0],t[1],l)&&(r=1);++n<r;)for(var s=t[n],p=i(s),f=-1,m=p.length;++f<m;){var d=p[f],y=e[d];(void 0===y||o(y,u[d])&&!c.call(e,d))&&(e[d]=s[d])}return e}));e.exports=l},5638:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},1137:e=>{e.exports=function(e){return e}},2900:(e,t,n)=>{var r=n(5829),o=n(2360),a=Object.prototype,i=a.hasOwnProperty,u=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!u.call(e,"callee")};e.exports=c},9785:e=>{var t=Array.isArray;e.exports=t},68:(e,t,n)=>{var r=n(8338),o=n(4194);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},3854:(e,t,n)=>{e=n.nmd(e);var r=n(7400),o=n(7714),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,u=i&&i.exports===a?r.Buffer:void 0,c=(u?u.isBuffer:void 0)||o;e.exports=c},8338:(e,t,n)=>{var r=n(9736),o=n(1611);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4194:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},1611:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2360:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},8519:(e,t,n)=>{var r=n(6972),o=n(9334),a=n(8125),i=a&&a.isTypedArray,u=i?o(i):r;e.exports=u},3893:(e,t,n)=>{var r=n(8213),o=n(9464),a=n(68);e.exports=function(e){return a(e)?r(e,!0):o(e)}},7714:e=>{e.exports=function(){return!1}},7644:e=>{"use strict";e.exports=a},3305:t=>{"use strict";t.exports=e},3545:e=>{"use strict";e.exports=t},7388:e=>{"use strict";e.exports=o},2650:e=>{"use strict";e.exports=r},1177:e=>{"use strict";e.exports=n}},u={};function c(e){var t=u[e];if(void 0!==t)return t.exports;var n=u[e]={id:e,loaded:!1,exports:{}};return i[e](n,n.exports,c),n.loaded=!0,n.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var l={};return(()=>{"use strict";c.r(l),c.d(l,{plugin:()=>tt});var e,t,n,r=c(3305),o=c(3545),a=c(1177);!function(e){e.Null="Null",e.Boolean="Boolean",e.UInt8="UInt8",e.UInt16="UInt16",e.UInt32="UInt32",e.UInt64="UInt64",e.Int8="Int8",e.Int16="Int16",e.Int32="Int32",e.Int64="Int64",e.Float32="Float32",e.Float64="Float64",e.String="String",e.Binary="Binary",e.Date="Date",e.DateTime="DateTime",e.TimestampSecond="TimestampSecond",e.TimestampMillisecond="TimestampMillisecond",e.TimestampMicrosecond="TimestampMicrosecond",e.TimestampNanosecond="TimestampNanosecond",e.List="List"}(e||(e={})),function(e){e[e.Success=0]="Success",e[e.Unknown=1e3]="Unknown",e[e.Unsupported=1001]="Unsupported",e[e.Unexpected=1002]="Unexpected",e[e.Internal=1003]="Internal",e[e.InvalidArguments=1004]="InvalidArguments",e[e.InvalidSyntax=2e3]="InvalidSyntax",e[e.PlanQuery=3e3]="PlanQuery",e[e.EngineExecuteQuery=3001]="EngineExecuteQuery",e[e.TableAlreadyExists=4e3]="TableAlreadyExists",e[e.TableNotFound=4001]="TableNotFound",e[e.TableColumnNotFound=4002]="TableColumnNotFound",e[e.TableColumnExists=4003]="TableColumnExists",e[e.DatabaseNotFound=4004]="DatabaseNotFound",e[e.StorageUnavailable=5e3]="StorageUnavailable",e[e.RuntimeResourcesExhausted=6e3]="RuntimeResourcesExhausted",e[e.UserNotFound=7e3]="UserNotFound",e[e.UnsupportedPasswordType=7001]="UnsupportedPasswordType",e[e.UserPasswordMismatch=7002]="UserPasswordMismatch",e[e.AuthHeaderNotFound=7003]="AuthHeaderNotFound",e[e.InvalidAuthHeader=7004]="InvalidAuthHeader",e[e.AccessDenied=7005]="AccessDenied"}(t||(t={})),function(e){e.Mysql="sql",e.PromQL="PromQL"}(n||(n={}));const i={[e.Null]:r.FieldType.other,[e.Boolean]:r.FieldType.boolean,[e.UInt8]:r.FieldType.number,[e.UInt16]:r.FieldType.number,[e.UInt32]:r.FieldType.number,[e.UInt64]:r.FieldType.number,[e.Int8]:r.FieldType.number,[e.Int16]:r.FieldType.number,[e.Int32]:r.FieldType.number,[e.Int64]:r.FieldType.number,[e.Float32]:r.FieldType.number,[e.Float64]:r.FieldType.number,[e.String]:r.FieldType.string,[e.Binary]:r.FieldType.string,[e.Date]:r.FieldType.time,[e.DateTime]:r.FieldType.time,[e.TimestampSecond]:r.FieldType.time,[e.TimestampMillisecond]:r.FieldType.time,[e.TimestampMicrosecond]:r.FieldType.time,[e.TimestampNanosecond]:r.FieldType.time,[e.List]:r.FieldType.other};function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))}}class p{fetch(e){return s((function*(){const t=(0,a.lastValueFrom)((0,o.getBackendSrv)().fetch(e)),n=(yield t).data;if("error"in n)throw new Error(`Error code ${n.code}.\n      ${n.error}`);return n}))()}querySql(e){var t=this;return s((function*(){return yield t.fetch({url:t.SQL_URL,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{sql:e,db:""===t.database?void 0:t.database}})}))()}querySqlToDataFrame(e){var t=this;return s((function*(){return function(e){if(!e.output[0].records.rows.length)return new r.MutableDataFrame;const t=e.output[0].records.schema.column_schemas,n=e.output[0].records.rows;return new r.MutableDataFrame({fields:t.map(((e,t)=>({name:e.name,type:i[e.data_type],values:n.map((e=>e[t]))})))})}(yield t.querySql(e))}))()}showTables(){var e=this;return s((function*(){return(t=yield e.querySql("SHOW TABLES"),t.output[0].records.rows).map((e=>e[0]));var t}))()}queryColumnSchemaOfTable(e){var t=this;return s((function*(){return(yield t.querySql(`DESC TABLE ${e}`)).output[0].records.rows.map((e=>({name:e[0],data_type:e[1],nullable:"YES"===e[2],default:e[3],semantic_type:e[4]})))}))()}queryColumnNamesOfTable(e){var t=this;return s((function*(){return(yield t.queryColumnSchemaOfTable(e)).map((e=>e.name))}))()}constructor(e,t){this.baseUrl=e,this.database=t,this.SQL_URL=`${this.baseUrl}/v1/sql`}}function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}class d extends r.DataSourceApi{query(e){var t=this;return m((function*(){const n=e.targets.map((o=m((function*(n){if(!n.queryText)return new r.MutableDataFrame;let o=n.queryText;return n.timeColumn&&(o=function(e,t,n){return e.replace("$__timeFilter",function(e,t){const{from:n,to:r}=e;return`${t} >= ${1e3*n.unix()} AND ${t} <= ${1e3*r.unix()}`}(t,n))}(o,e.range,n.timeColumn)),yield t.client.querySqlToDataFrame(o)})),function(e){return o.apply(this,arguments)}));var o;return Promise.all(n).then((e=>({data:e})))}))()}testDatasource(){var e=this;return m((function*(){try{const t=yield e.client.querySql("SELECT 1");return 0===t.code&&1===t.output[0].records.rows.length?{status:"success",message:"Success to connect to GreptimeDB"}:{status:"error",message:`Greptime error code ${t.code}. \n          See https://github.com/GreptimeTeam/greptimedb/blob/develop/src/common/error/src/status_code.rs for more details`}}catch(e){return e instanceof Object&&"data"in e&&e.data instanceof Object&&"message"in e.data&&"Authentication to data source failed"===e.data.message?{status:"error",message:"Authentication to data source failed. You may also need to check the name of the database."}:{status:"error",message:"Failed to connect to GreptimeDB"}}}))()}constructor(e){super(e),this.client=new p(e.url,e.jsonData.database),this.queryLanguage=e.jsonData.queryLanguage}}var y=c(2650),v=c.n(y),b=c(7388);function h(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function g(e){return!!e&&!!e[oe]}function O(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ae}(e)||Array.isArray(e)||!!e[re]||!!(null===(t=e.constructor)||void 0===t?void 0:t[re])||S(e)||x(e))}function j(e,t,n){void 0===n&&(n=!1),0===E(e)?(n?Object.keys:ie)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function E(e){var t=e[oe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:S(e)?2:x(e)?3:0}function w(e,t){return 2===E(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function P(e,t,n){var r=E(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function S(e){return Z&&e instanceof Map}function x(e){return ee&&e instanceof Set}function C(e){return e.o||e.t}function T(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ue(e);delete t[oe];for(var n=ie(t),r=0;r<n.length;r++){var o=n[r],a=t[o];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function F(e,t){return void 0===t&&(t=!1),D(e)||g(e)||!O(e)||(E(e)>1&&(e.set=e.add=e.clear=e.delete=A),Object.freeze(e),t&&j(e,(function(e,t){return F(t,!0)}),!0)),e}function A(){h(2)}function D(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function I(e){var t=ce[e];return t||h(18,e),t}function R(){return X}function q(e,t){t&&(I("Patches"),e.u=[],e.s=[],e.v=t)}function N(e){$(e),e.p.forEach(U),e.p=null}function $(e){e===X&&(X=e.l)}function M(e){return X={p:[],l:X,h:e,m:!0,_:0}}function U(e){var t=e[oe];0===t.i||1===t.i?t.j():t.O=!0}function B(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||I("ES5").S(t,e,r),r?(n[oe].P&&(N(t),h(4)),O(e)&&(e=L(t,e),t.l||k(t,e)),t.u&&I("Patches").M(n[oe].t,e,t.u,t.s)):e=L(t,n,[]),N(t),t.u&&t.v(t.u,t.s),e!==ne?e:void 0}function L(e,t,n){if(D(t))return t;var r=t[oe];if(!r)return j(t,(function(o,a){return _(e,r,t,o,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return k(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=T(r.k):r.o,a=o,i=!1;3===r.i&&(a=new Set(o),o.clear(),i=!0),j(a,(function(t,a){return _(e,r,o,t,a,n,i)})),k(e,o,!1),n&&e.u&&I("Patches").N(r,n,e.u,e.s)}return r.o}function _(e,t,n,r,o,a,i){if(g(o)){var u=L(e,o,a&&t&&3!==t.i&&!w(t.R,r)?a.concat(r):void 0);if(P(n,r,u),!g(u))return;e.m=!1}else i&&n.add(o);if(O(o)&&!D(o)){if(!e.h.D&&e._<1)return;L(e,o),t&&t.A.l||k(e,o)}}function k(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&F(t,n)}function Q(e,t){var n=e[oe];return(n?C(n):e)[t]}function K(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function W(e){e.P||(e.P=!0,e.l&&W(e.l))}function G(e){e.o||(e.o=T(e.t))}function z(e,t,n){var r=S(t)?I("MapSet").F(t,n):x(t)?I("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:R(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,a=le;n&&(o=[r],a=se);var i=Proxy.revocable(o,a),u=i.revoke,c=i.proxy;return r.k=c,r.j=u,c}(t,n):I("ES5").J(t,n);return(n?n.A:R()).p.push(r),r}function H(e){return g(e)||h(22,e),function e(t){if(!O(t))return t;var n,r=t[oe],o=E(t);if(r){if(!r.P&&(r.i<4||!I("ES5").K(r)))return r.t;r.I=!0,n=Y(t,o),r.I=!1}else n=Y(t,o);return j(n,(function(t,o){r&&function(e,t){return 2===E(e)?e.get(t):e[t]}(r.t,t)===o||P(n,t,e(o))})),3===o?new Set(n):n}(e)}function Y(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return T(e)}var V,X,J="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Z="undefined"!=typeof Map,ee="undefined"!=typeof Set,te="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ne=J?Symbol.for("immer-nothing"):((V={})["immer-nothing"]=!0,V),re=J?Symbol.for("immer-draftable"):"__$immer_draftable",oe=J?Symbol.for("immer-state"):"__$immer_state",ae=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ie="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ue=Object.getOwnPropertyDescriptors||function(e){var t={};return ie(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},ce={},le={get:function(e,t){if(t===oe)return e;var n=C(e);if(!w(n,t))return function(e,t,n){var r,o=K(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!O(r)?r:r===Q(e.t,t)?(G(e),e.o[t]=z(e.A.h,r,e)):r},has:function(e,t){return t in C(e)},ownKeys:function(e){return Reflect.ownKeys(C(e))},set:function(e,t,n){var r=K(C(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=Q(C(e),t),a=null==o?void 0:o[oe];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,o)&&(void 0!==n||w(e.t,t)))return!0;G(e),W(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Q(e.t,t)||t in e.t?(e.R[t]=!1,G(e),W(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=C(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){h(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){h(12)}},se={};j(le,(function(e,t){se[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),se.deleteProperty=function(e,t){return se.set.call(this,e,t,void 0)},se.set=function(e,t,n){return le.set.call(this,e[0],t,n,e[0])};var pe=function(){function e(e){var t=this;this.g=te,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,i=Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var i;if("function"!=typeof n&&h(6),void 0!==r&&"function"!=typeof r&&h(7),O(e)){var u=M(t),c=z(t,e,void 0),l=!0;try{i=n(c),l=!1}finally{l?N(u):$(u)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return q(u,r),B(e,u)}),(function(e){throw N(u),e})):(q(u,r),B(i,u))}if(!e||"object"!=typeof e){if(void 0===(i=n(e))&&(i=e),i===ne&&(i=void 0),t.D&&F(i,!0),r){var s=[],p=[];I("Patches").M(e,i,s,p),r(s,p)}return i}h(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,a=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,o]})):[a,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){O(e)||h(8),g(e)&&(e=H(e));var t=M(this),n=z(this,e,void 0);return n[oe].C=!0,$(t),n},t.finishDraft=function(e,t){var n=(e&&e[oe]).A;return q(n,t),B(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!te&&h(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=I("Patches").$;return g(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),fe=new pe,me=fe.produce;fe.produceWithPatches.bind(fe),fe.setAutoFreeze.bind(fe),fe.setUseProxies.bind(fe),fe.applyPatches.bind(fe),fe.createDraft.bind(fe),fe.finishDraft.bind(fe);const de=me,{FormField:ye}=b.LegacyForms,ve=[{label:"SQL",value:n.Mysql}];var be=c(236),he=c.n(be);const ge={queryText:"SELECT * FROM numbers LIMIT 5",selectedColumns:[],whereConditions:[],groupByColumns:[]};function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class je extends y.PureComponent{render(){const e=he()(this.props.query,ge);return v().createElement("div",null,v().createElement(b.CodeEditor,{height:"200px",language:"sql",value:e.queryText,onEditorDidMount:this.onEditorDidMount,onBlur:this.onEditorTextChange,onSave:this.onEditorTextChange}))}constructor(...e){super(...e),this.changeQuery=(e,t)=>{const{query:n,onChange:r}=this.props;var o,a;r((o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oe(e,t,n[t])}))}return e}({},n),a=null!=(a={[e]:t})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(a)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})),o))},this.onChangeFactory=e=>t=>{this.changeQuery(e,t.target.value)},this.onEditorDidMount=e=>{this.editor=e},this.onEditorTextChange=()=>{this.editor&&(this.changeQuery("queryText",this.editor.getValue()),this.props.onRunQuery())}}}function Ee(e){return{label:String(e),value:e}}const we=e=>{const{loadOptions:t,onChange:n}=e;return v().createElement(b.SegmentAsync,{placeholder:"+",loadOptions:t,onChange:n})},Pe=e=>{const{children:t,onRemove:n}=e;return v().createElement(v().Fragment,null,v().createElement(b.Tooltip,{interactive:!0,content:()=>v().createElement(b.Button,{onClick:n,variant:"destructive",size:"sm"},"Remove"),placement:"bottom-start"},v().createElement("span",null,t)))};var Se=c(7644);const xe=[{label:"Alias",options:[{label:"alias",value:{type:"alias"}}]},{label:"Functions",options:["sum","avg","max","min","count","distinct"].map((e=>({label:e,value:{type:"function",name:e}})))},{label:"Math",options:["+","-","*","/"].map((e=>({label:e,value:{type:"operator",name:e,param:"100"}})))}],Ce=e=>{const{selectStatement:t,onChangeAlias:n,onChangeAddons:r}=e;var o;const a=null!==(o=t.addons)&&void 0!==o?o:[],i=t.alias,u=(0,b.useStyles2)(Te),c=e=>()=>{const t=a.filter(((t,n)=>n!==e));r(t)},l=e=>t=>{const n=de(a,(n=>{n[e]=t.value}));r(n)};return v().createElement(v().Fragment,null,a.map(((e,t)=>{return v().createElement(v().Fragment,{key:e.name+e.param},void 0===e.param?v().createElement(v().Fragment,null,v().createElement(Pe,{onRemove:c(t)},v().createElement(b.SegmentAsync,{value:`${e.name}${"function"===e.type?" ( )":""}`,loadOptions:()=>Promise.resolve(xe),onChange:l(t)}))):v().createElement(v().Fragment,null,v().createElement(Pe,{onRemove:c(t)},v().createElement(b.SegmentAsync,{value:e.name,loadOptions:()=>Promise.resolve(xe),onChange:l(t)})),v().createElement(b.SegmentInput,{value:e.param,onChange:(n=t,e=>{const t=de(a,(t=>{t[n].param=String(e)}));r(t)})})));var n})),i&&v().createElement(v().Fragment,null,v().createElement(Pe,{onRemove:()=>{n(void 0)}},v().createElement(b.InlineLabel,{width:"auto",className:u.inlineLabel},"AS")),v().createElement(b.SegmentInput,{value:i,onChange:e=>{n(String(e))}})),v().createElement(we,{loadOptions:()=>Promise.resolve(xe),onChange:e=>{const t=e.value;var o;"alias"===t.type?n("alias"):(o=t,r([...a,o]))}}))};function Te(e){return{inlineLabel:Se.css`
      color: ${e.colors.primary.text};
      `}}function Fe(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fe(a,r,o,i,u,"next",e)}function u(e){Fe(a,r,o,i,u,"throw",e)}i(void 0)}))}}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ie=e=>{const{selectedColumns:t,timeColumn:n,changeQueryByKey:r,onLoadColumnSchema:o}=e,a=(i=Ae((function*(){var e;const r=t.map((t=>null!==(e=t.alias)&&void 0!==e?e:t.column));return(yield o()).map((e=>e.name)).filter((e=>![n,...r].includes(e))).map((e=>Ee(e)))})),function(){return i.apply(this,arguments)});var i;const u=e=>{const n=[...t,{column:e.value}];r("selectedColumns",n)},c=e=>n=>{const o=t.map(((t,r)=>{return r===e?(o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){De(e,t,n[t])}))}return e}({},t),a=null!=(a={column:n.value})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(a)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})),o):t;var o,a}));r("selectedColumns",o)},l=e=>()=>{const n=t.filter(((t,n)=>n!==e));r("selectedColumns",n)},s=e=>n=>{r("selectedColumns",de(t,(t=>{t[e].alias=n})))},p=[...t,{column:""}];return v().createElement(v().Fragment,null,p.map(((e,n)=>{return v().createElement(b.SegmentSection,{label:0===n?"SELECT":"",fill:!0,key:e.column},n===p.length-1?v().createElement(v().Fragment,null,v().createElement(we,{loadOptions:a,onChange:u})):v().createElement(v().Fragment,null,v().createElement(Pe,{onRemove:l(n)},v().createElement(b.SegmentAsync,{value:e.column,onChange:c(n),loadOptions:(i=e.column,Ae((function*(){return[Ee(i),...yield a()]})))})),v().createElement(Ce,{selectStatement:e,onChangeAddons:(o=n,e=>{r("selectedColumns",de(t,(t=>{t[o].addons=e})))}),onChangeAlias:s(n)})));var o,i})))},Re=["=","!=",">","<",">=","<="],qe=["AND","OR"],Ne=["select column",Re[0],"value","AND"],$e=e=>{const{whereConditions:t,handleLoadAllColumns:n,changeQueryByKey:r}=e,o=e=>{const n=[...t,[e.value,Ne[1],Ne[2],Ne[3]]];r("whereConditions",n)},a=e=>n=>{const o=t.map(((t,r)=>r===e?[n.value,t[1],t[2],t[3]]:t));r("whereConditions",o)},i=e=>n=>{const o=t.map(((t,r)=>r===e?[t[0],n.value,t[2],t[3]]:t));r("whereConditions",o)},u=e=>n=>{const o=[...t].map(((t,r)=>r===e?[t[0],t[1],n,t[3]]:t));r("whereConditions",o)},c=e=>n=>{const o=[...t].map(((t,r)=>r===e?[t[0],t[1],t[2],n.value]:t));r("whereConditions",o)},l=e=>()=>{const n=[...t].filter(((t,n)=>n!==e));r("whereConditions",n)},s=[...t,Ne];return v().createElement(v().Fragment,null,s.map(((e,t)=>{const[r,p,f,m]=e;return v().createElement(b.SegmentSection,{label:0===t?"WHERE":"",fill:!0,key:e.toString()+t},t===s.length-1?v().createElement(v().Fragment,null,v().createElement(we,{onChange:o,loadOptions:n})):v().createElement(v().Fragment,null,v().createElement(Pe,{onRemove:l(t)},v().createElement(b.SegmentAsync,{value:Ee(r),loadOptions:n,onChange:a(t)})),v().createElement(b.Segment,{value:Ee(p),options:Re.map(Ee),onChange:i(t),inputMinWidth:40}),v().createElement(b.SegmentInput,{value:f,placeholder:"value",onChange:u(t)}),t<s.length-2&&v().createElement(b.Segment,{value:Ee(m),options:qe.map(Ee),onChange:c(t)})))})))};function Me(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Me(a,r,o,i,u,"next",e)}function u(e){Me(a,r,o,i,u,"throw",e)}i(void 0)}))}}const Be=e=>{const{groupByColumns:t,changeQueryByKey:n,selectStatements:r,timeColumn:o}=e,a=()=>{const e=r.map((e=>e.column));return(o?[...e,o]:e).filter((e=>!t.includes(e))).map((e=>Ee(e)))},i=e=>{const r=[...t,e.value];n("groupByColumns",r)},u=e=>r=>{const o=t.map(((t,n)=>n===e?r.value:t));n("groupByColumns",o)},c=e=>()=>{const r=t.filter(((t,n)=>n!==e));n("groupByColumns",r)},l=[...t,""];return v().createElement(b.SegmentSection,{label:"GROUP BY",fill:!0},l.map(((e,t)=>t===l.length-1?v().createElement(v().Fragment,null,v().createElement(we,{key:t,loadOptions:Ue((function*(){return a()})),onChange:i})):v().createElement(v().Fragment,null,v().createElement(Pe,{onRemove:c(t)},v().createElement(b.Segment,{key:t,value:Ee(e),options:[...a(),Ee(e)],onChange:u(t)}))))))};function Le(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}const _e=e=>{const{fromTable:t,timeColumn:n,changeQueryByKey:o,onLoadColumnSchema:a}=e,u=(0,b.useStyles2)(ke),c=(l=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Le(a,r,o,i,u,"next",e)}function u(e){Le(a,r,o,i,u,"throw",e)}i(void 0)}))}}((function*(){return(yield a()).filter((e=>{return t=e.data_type,i[t]===r.FieldType.time;var t})).map((e=>e.name)).map(Ee)})),function(){return l.apply(this,arguments)});var l;const s=(0,y.useRef)();return(0,y.useEffect)((()=>{s.current!==t&&(s.current=t,a().then((e=>{const t=e.find((e=>"TIME INDEX"===e.semantic_type));o("timeColumn",null==t?void 0:t.name)})))}),[o,t,n,a]),v().createElement(v().Fragment,null,v().createElement(b.InlineLabel,{width:"auto",className:u.inlineLabel},"Time column"),v().createElement(b.SegmentAsync,{value:null!=n?n:"select time column",onChange:e=>{o("timeColumn",e.value)},loadOptions:c}))};function ke(e){return{inlineLabel:Se.css`
        color: ${e.colors.primary.text};
      `}}function Qe(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Qe(a,r,o,i,u,"next",e)}function u(e){Qe(a,r,o,i,u,"throw",e)}i(void 0)}))}}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){We(e,t,n[t])}))}return e}function ze(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const He=e=>{const{datasource:t,query:n,onChange:r,onRunQuery:o}=e,{client:a}=t,i=Ge({},ge,n),{fromTable:u,timeColumn:c,selectedColumns:l,whereConditions:s,groupByColumns:p}=i,f=(e,t)=>{const n=ze(Ge({},i),{[e]:t});r(n),(e=>{const t=function(e,t){if(e.isRawQuery)return e.queryText;const{fromTable:n,timeColumn:r,selectedColumns:o,whereConditions:a,groupByColumns:i}=e;let u="";var c;u+=`SELECT ${c=o,(null==c?void 0:c.length)?c.map((e=>{var t;let n=`${e.column}`;return(null===(t=e.addons)||void 0===t?void 0:t.length)&&(n=e.addons.reduce(((e,t,n,r)=>{switch(t.type){case"function":return`${t.name}(${e})`;case"operator":var o;return"function"===(null===(o=r[n+1])||void 0===o?void 0:o.type)?`${e} ${t.name} ${t.param}`:`(${e} ${t.name} ${t.param})`;default:return console.log("Received unexpected addon type:",t),e}}),n)),e.alias&&(n+=` AS ${e.alias}`),n})).join(", "):""}${r?`${(null==o?void 0:o.length)?", ":""}${r}`:""} \n`,u+=`FROM ${n} \n`;let l=function(e,t="\n"){return e?e.map(((t,n)=>n===e.length-1?t.slice(0,-1).join(" "):t.join(" "))).join(t):""}(a);return l=function(e,t){return t?e.length>0?`$__timeFilter AND (${e})`:"$__timeFilter":e}(l,r),u+=(l.length>0?`WHERE ${l}`:"")+"\n",u+=((null==i?void 0:i.length)?`GROUP BY ${i.join(", ")}`:"")+"\n",u}(e);r(ze(Ge({},e),{queryText:t})),o()})(n)},m=(0,y.useMemo)((()=>a.showTables()),[a]),d=(h=Ke((function*(){return(yield m).map(Ee)})),function(){return h.apply(this,arguments)});var h;const g=(0,y.useMemo)((()=>u?a.queryColumnSchemaOfTable(u):Promise.resolve([])),[a,u]),O=function(){var e=Ke((function*(){return yield g}));return function(){return e.apply(this,arguments)}}(),j=(0,y.useMemo)(Ke((function*(){return(yield g).map((e=>e.name))})),[g]);return v().createElement(v().Fragment,null,v().createElement("div",null,v().createElement(b.SegmentSection,{label:"FROM",fill:!0},v().createElement(b.SegmentAsync,{value:null!=u?u:"select table",onChange:e=>{f("fromTable",e.value)},loadOptions:d}),v().createElement(_e,{fromTable:u,timeColumn:c,changeQueryByKey:f,onLoadColumnSchema:O})),v().createElement(Ie,{selectedColumns:l,timeColumn:c,changeQueryByKey:f,onLoadColumnSchema:O}),v().createElement($e,{whereConditions:s,handleLoadAllColumns:Ke((function*(){return(yield j).map(Ee)})),changeQueryByKey:f}),v().createElement(Be,{groupByColumns:p,selectStatements:l,timeColumn:c,changeQueryByKey:f})))},Ye=({isRawQuery:e,onIsRawChange:t})=>{const[n,r]=(0,y.useState)(!1);return(0,y.useEffect)((()=>{r(!1)}),[e]),v().createElement(v().Fragment,null,e?v().createElement(v().Fragment,null,v().createElement(b.Button,{"aria-label":"Switch to visual editor",icon:"pen",variant:"secondary",type:"button",onClick:()=>{r(!0)}}),v().createElement(b.ConfirmModal,{isOpen:n,title:"Switch to visual editor mode",body:"Are you sure to switch to visual editor mode? You will lose the changes done in raw query mode.",confirmText:"Yes, switch to editor mode",dismissText:"No, stay in raw query mode",onConfirm:()=>{t(!1)},onDismiss:()=>{r(!1)}})):v().createElement(b.Button,{"aria-label":"Switch to text editor",icon:"pen",variant:"secondary",type:"button",onClick:()=>{t(!0)}}))};function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(){return Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xe.apply(this,arguments)}const Je=e=>{const{query:t,onChange:n,onRunQuery:r}=e,{isRawQuery:o}=t;return v().createElement(v().Fragment,null,v().createElement("div",{className:(0,Se.css)({display:"flex"})},v().createElement("div",{className:(0,Se.css)({flexGrow:1})},o?v().createElement(je,Xe({},e)):v().createElement(He,Xe({},e))),v().createElement(Ye,{isRawQuery:null!=o&&o,onIsRawChange:e=>{var o,a;n((o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ve(e,t,n[t])}))}return e}({},t),a=null!=(a={isRawQuery:e})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(a)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})),o)),r()}})))},Ze=e=>v().createElement("div",null,"placeholder");function et(){return et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(this,arguments)}const tt=new r.DataSourcePlugin(d).setConfigEditor((e=>{const{options:t,onOptionsChange:n}=e,{jsonData:r}=t,o=(e,r)=>{n(de(t,(t=>{t.jsonData[e]=r})))};var a;return v().createElement("div",null,v().createElement("h3",{className:"page-heading"},"Query Language"),v().createElement("div",{className:"gf-form-group"},v().createElement(b.Select,{width:20,value:r.queryLanguage,defaultValue:ve[0],options:ve,onChange:e=>o("queryLanguage",e.value)})),v().createElement(b.DataSourceHttpSettings,{dataSourceConfig:t,defaultUrl:"http://localhost:4000",onChange:n,showAccessOptions:!0}),v().createElement(b.Alert,{severity:"info",title:"Database Access"},v().createElement("p",null,"Setting the database for this datasource does not deny access to other databases.",v().createElement("br",null),"Users can still query other databases using the query syntax like:",v().createElement("br",null),v().createElement("code",null,'SELECT * FROM "other_db"."tablename"."field"'),v().createElement("br",null),v().createElement("br",null),"To support data isolation and security, make sure appropriate permissions are configured in GreptimeDB.")),v().createElement("div",{className:"gf-form-group"},v().createElement("h3",{className:"page-heading"},"GreptimeDB Details"),v().createElement("div",{className:"gf-form-inline"},v().createElement("div",{className:"gf-form"},v().createElement(ye,{label:"database",labelWidth:6,inputWidth:20,onChange:("database",e=>{o("database",e.target.value)}),value:null!==(a=r.database)&&void 0!==a?a:"public"})))))})).setQueryEditor((e=>{switch(e.datasource.queryLanguage){case n.Mysql:return v().createElement(Je,et({},e));case n.PromQL:return v().createElement(Ze,et({},e));default:return v().createElement(Je,et({},e))}}))})(),l})()));
//# sourceMappingURL=module.js.map